# 📈 Emotional Arc — 情绪轨迹可视化工具（基于中文 BERT）

**Emotional Arc** 是一个基于中文 BERT 情感模型的可视化工具。  
它可以分析任意中文文本（小说片段、文章、对话、影评……），并绘制从头到尾的**情绪起伏曲线**。

👉 无论你想分析叙事结构、心理节奏、写作风格，还是研究文本情绪表达，这个工具都能帮助你从一个全新的角度“读懂”文本。

---

## 🌐 在线体验（无需安装）

🔗 稍等补充：你自己的部署地址  
例如：

👉 **Live Demo:** https://emotionalarc.streamlit.app

（点击即可在线使用）

---

## ✨ 功能亮点

### ✅ 1. 滑动窗口情感分析（sentence-independent）
- 将全文切成许多“小片段”
- 使用 **IDEA-CCNL / Erlangshen-Roberta-110M-Sentiment** 模型评估情绪倾向  
- 输出 0~1 的正向概率（越高越正向）

---

### ✅ 2. 精美交互式情绪弧线图（Plotly）
- 鼠标悬停即可查看：
  - 片段起始位置
  - 情感得分
  - 文本片段摘要
- 自动标记全文的最高点 / 最低点
- 可缩放、拖动、对比，完全交互式体验

---

### ✅ 3. 重采样后的标准化情绪轨迹
为了方便不同文本之间对比，工具提供：

- **原始弧线**：基于真实字符位置  
- **重采样弧线**：按 0–1 标准化位置显示整体走势  

---

### ✅ 4. 文本来源灵活
- 上传 `.txt` 文件  
- 或直接在输入框粘贴任意文本  

---

### ✅ 5. 完整分析结果可导出
- 每个窗口的情感评分  
- 对应文本片段  
- 原始轨迹与重采样轨迹  

---

## 🧠 情绪弧线（Emotional Arc）是什么？

情绪弧线（Emotional Arc）由美国计算机科学家 Matthew Jockers 提出，后来被大量用于：

- 文学风格分析  
- 叙事结构研究  
- 编剧工具  
- 情绪计算（Affective Computing）  
- 情绪节奏分析  

简单理解就是：  
“文本从头到尾的情绪走势就像一条曲线，它能告诉我们故事什么时候紧张、什么时候舒缓、什么时候高潮。”

---

## 🛠 技术原理

### 情感模型
- **IDEA-CCNL/Erlangshen-Roberta-110M-Sentiment**  
  （中文 RoBERTa，专用于情感分类）

### 滑动窗口机制
- 默认窗口大小：80 字符  
- 默认滑动步长：60 字符  
- 每段文本单独推理 → 输出 0~1 概率

### 重采样机制
- 使用线性插值将整个情绪序列压缩到固定长度（默认为 20）
- 可用于对比不同文本的总体情绪趋势

### 可视化
基于 **Plotly** 的交互折线图：

- 悬停提示文本片段  
- 自动高亮最大/最小情绪点  
- 美观主题：plotly_white
